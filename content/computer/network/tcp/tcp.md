<https://blog.csdn.net/fuhanghang/article/details/114528098>

# TCP 三次握手

在tcp/ip协议中，tcp通过三次握手建立起一个tcp的链接，大致如下：

第一次握手：客户端尝试连接服务器，向服务器发送syn包，syn=j，客户端进入SYN_SEND状态等待服务器确认。

第二次握手：服务器接收客户端syn包并确认（ack=j+1），同时向客户端发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态。

第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。


# TCP 四次挥手






# TCP 细节
要实现可靠传输，需要考虑：

**数据的破坏、丢包、重复、分片顺序混乱……**

TCP 解决机制：

**检验和、序列号、确认应答、重发控制、连接管理、窗口控制……**


TCP 充分实现了数据传输时各种控制功能，丢包重发控制，对次序乱掉的分包进行顺序控制，TCP 是一种面向有连接的协议，只有确认通信对端存在才会发送数据，从而控制通信流量浪费。

TCP 在 IP 这种无连接的网络上也能够实现高可靠性的通信。


## 通过序列号与确认应答提高可靠性

## 重发超时如何确认

## 连接管路

## 